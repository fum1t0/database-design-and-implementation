# Cp01. Introduction

## 目次

- [1.1 データベースシステムの必要性](#11-データベースシステムの必要性)
- [1.2 Derby](#12-derby)
- [1.3 データベースエンジン](#13-データベースエンジン)
- [1.4 SimpleDB](#14-simpledb)
- [1.5 SimpleDB の SQL](#15-simpledb-の-sql)
- [1.6 サマリ](#16-サマリ)

## 1.1 データベースシステムの必要性

データベースとは、コンピュータ上に格納されたデータの集合体であり、これらのデータを管理するための幅広い機能を提供するのがデータベースシステム。  
レコードを管理するには以下の要件を満たさなければならない。

- データが永続的であること。つまり、コンピュータの電源を落としてもデータが消失しないこと。
- 複数のユーザから同時に操作可能であること。
- 保持されたデータが正確で整合性が保たれた状態であること。これはデータに制約を設けたりトランザクションを使用したりすることで実現可能。
- 非常に多くのデータを取り扱い可能であること。
- 使いやすいこと。

## 1.2 Derby

Derby の使い方の話なので略

## 1.3 データベースエンジン

データベースアプリケーションはユーザインタフェースとデータベースへのアクセスを行うコードの 2 つで構成されている。UI をデータベースエンジンから分離することでアプリケーションをシンプルにできる。インターフェースを揃えておけば他の異なるデータベースエンジンへの拡張が容易になるというメリットもある。

## 1.4 SimpleDB

今回作る DB。Derby はリッチな代わりに複雑だが、今回は小さくて可読性が高く、かつ簡単に修正できる SimpleDB を作成した。不必要な機能を省略し、SQL のごく一部のみを実装し、非常に単純なアルゴリズムのみを利用している。これはデータベースエンジンの各構成要素とこれらの構成要素がどのように相互作用するかを明確にするためである。

## 1.5 SimpleDB の SQL

Derby はほぼ全ての標準 SQL を実装しているが、SimpleDB はそれらのうちのごく一部のみを実装し、標準 SQL にはない制約を課している。ここではこれらの制約を簡単に示す。他の章ではこれらの制限について詳しく説明し、章末演習では省略された昨日のいくつかを実装するように求められる。

SimpleDB のクエリは select-from-where 区のみで構成される。`select` 句にはフィールド名（`AS` キーワードはなし）のリストが含まれており、`from` 句にはテーブル名のリスト（範囲変数なし）が含まれている。オプションの `where` 句の項目はブール演算子 `and` のみ利用可能。項目は定数とフィールド名を等価比較することしかできない。標準 SQL 床となり、他の比較演算子、他のブール演算子、算術演算子や組み込み関数、括弧はない。このためネストされたクエリ、集計、および計算された値はサポートされない。範囲変数やりねーみんぐがないため、クエリ内のすべてのフィールド名は互いに交わらない必要がある。また、`group by` や `order by` 句がないため、グループ化や並べ替えはサポートされていない。その他の制限として以下がある。

- `select` 句での `*` はサポートされていない。
- `null` は考慮しない。つまり全て NOT NULL である。
- `from` 句に明示的なジョインや外部結合はない。
- `union` キーワードはサポートされていない。
- `insert` 文は明示的な値のみを取る。つまり、insert はクエリで指定することができない。
- `update` 文は set 句に 1 つの代入のみを扱える。

## 1.6 サマリ

- データベースは、コンピュータに保存されたデータのコレクションである。データベース内のデータは通常、レコードに整理される。データベースシステムは、データベース内のレコードを管理するソフトウェアである。
- データベースシステムは、大規模な共有データベースを処理できる必要がある。データは遅い永続メモリに保存される。データに対する高レベルのインターフェースを提供し、競合するユーザーの更新やシステムのクラッシュに対してデータの正確性を保証する必要がある。データベースシステムは、以下の機能を備えることでこれらの要件を満たす：
  - レコードをファイルに保存し、通常のファイルシステムで許可されるより効率的にアクセスできる形式を使用する能力
  - ファイル内のデータをインデックス化するための複雑なアルゴリズム、高速なアクセスをサポートするため
  - ネットワークを介した複数のユーザーからの同時アクセスを処理する能力、必要に応じてユーザーをブロックする機能
  - 変更のコミットとロールバックをサポートする能力
  - データベースレコードをメインメモリにキャッシュし、永続メモリとメインメモリのバージョンの同期を管理し、システムがクラッシュした場合にデータベースを合理的な状態に復元する機能
  - ユーザーのテーブルに対するクエリをファイル上の実行可能コードに変換するための言語コンパイラ/インタープリター
  - 非効率なクエリを効率的なものに変換するためのクエリの最適化戦略
- データベースエンジンは、データベースシステムのコンポーネントであり、データを維持する。データベースアプリケーションはユーザーの入出力を担当し、必要なデータを取得するためにデータベースエンジンを呼び出す。
- データベースエンジンへの接続は、埋め込み型またはサーバーベースのどちらかになる。埋め込み型の接続を持つプログラムは、排他的なアクセスを持つ。
